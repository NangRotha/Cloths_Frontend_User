{"ast":null,"code":"import axios from'axios';const api=axios.create({baseURL:process.env.REACT_APP_API_URL||'http://localhost:8000',headers:{'Content-Type':'application/json'},withCredentials:false// Important for CORS\n});// Add token to requests if available\napi.interceptors.request.use(config=>{var _config$method;const token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}console.log('Frontend-User API Request:',(_config$method=config.method)===null||_config$method===void 0?void 0:_config$method.toUpperCase(),config.url);return config;});// Add response interceptor for debugging\napi.interceptors.response.use(response=>{var _response$config$meth;console.log('Frontend-User API Response:',(_response$config$meth=response.config.method)===null||_response$config$meth===void 0?void 0:_response$config$meth.toUpperCase(),response.config.url,response.status);return response;},error=>{var _error$config,_error$config$method,_error$config2,_error$response,_error$response2;console.error('Frontend-User API Error:',(_error$config=error.config)===null||_error$config===void 0?void 0:(_error$config$method=_error$config.method)===null||_error$config$method===void 0?void 0:_error$config$method.toUpperCase(),(_error$config2=error.config)===null||_error$config2===void 0?void 0:_error$config2.url,(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status);// Handle authentication errors\nif(((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.status)===401){localStorage.removeItem('token');window.location.href='/login';}return Promise.reject(error);});export const authAPI={login:credentials=>{const params=new URLSearchParams();params.append('username',credentials.username);params.append('password',credentials.password);return api.post('/api/auth/login',params,{headers:{'Content-Type':'application/x-www-form-urlencoded'}});},register:userData=>api.post('/api/auth/register',userData),getProfile:()=>api.get('/api/auth/me'),googleLogin:()=>api.get('/api/auth/google'),loginWithGoogle:token=>api.post('/api/auth/google/callback',{token})};export const productsAPI={getProducts:()=>{console.log('Fetching products from backend...');return api.get('/api/products/');},getProduct:id=>api.get(\"/api/products/\".concat(id,\"/\"))};export const ordersAPI={createOrder:orderData=>api.post('/api/orders/',orderData),getOrders:()=>api.get('/api/orders/'),getOrder:id=>api.get(\"/api/orders/\".concat(id,\"/\")),generateKHQR:orderId=>api.post(\"/api/orders/\".concat(orderId,\"/generate-khqr\")),verifyPayment:(orderId,data)=>api.post(\"/api/orders/\".concat(orderId,\"/verify-payment\"),data)};export default api;","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","headers","withCredentials","interceptors","request","use","config","_config$method","token","localStorage","getItem","Authorization","concat","console","log","method","toUpperCase","url","response","_response$config$meth","status","error","_error$config","_error$config$method","_error$config2","_error$response","_error$response2","removeItem","window","location","href","Promise","reject","authAPI","login","credentials","params","URLSearchParams","append","username","password","post","register","userData","getProfile","get","googleLogin","loginWithGoogle","productsAPI","getProducts","getProduct","id","ordersAPI","createOrder","orderData","getOrders","getOrder","generateKHQR","orderId","verifyPayment","data"],"sources":["/Users/rotha/Documents/Project /Cloth/frontend-user/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:8000',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  withCredentials: false, // Important for CORS\n});\n\n// Add token to requests if available\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  console.log('Frontend-User API Request:', config.method?.toUpperCase(), config.url);\n  return config;\n});\n\n// Add response interceptor for debugging\napi.interceptors.response.use(\n  (response) => {\n    console.log('Frontend-User API Response:', response.config.method?.toUpperCase(), response.config.url, response.status);\n    return response;\n  },\n  (error) => {\n    console.error('Frontend-User API Error:', error.config?.method?.toUpperCase(), error.config?.url, error.response?.status);\n    \n    // Handle authentication errors\n    if (error.response?.status === 401) {\n      localStorage.removeItem('token');\n      window.location.href = '/login';\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\nexport const authAPI = {\n  login: (credentials) => {\n    const params = new URLSearchParams();\n    params.append('username', credentials.username);\n    params.append('password', credentials.password);\n    return api.post('/api/auth/login', params, {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    });\n  },\n  register: (userData) => api.post('/api/auth/register', userData),\n  getProfile: () => api.get('/api/auth/me'),\n  googleLogin: () => api.get('/api/auth/google'),\n  loginWithGoogle: (token) => api.post('/api/auth/google/callback', { token }),\n};\n\nexport const productsAPI = {\n  getProducts: () => {\n    console.log('Fetching products from backend...');\n    return api.get('/api/products/');\n  },\n  getProduct: (id) => api.get(`/api/products/${id}/`),\n};\n\nexport const ordersAPI = {\n  createOrder: (orderData) => api.post('/api/orders/', orderData),\n  getOrders: () => api.get('/api/orders/'),\n  getOrder: (id) => api.get(`/api/orders/${id}/`),\n  generateKHQR: (orderId) => api.post(`/api/orders/${orderId}/generate-khqr`),\n  verifyPayment: (orderId, data) => api.post(`/api/orders/${orderId}/verify-payment`, data),\n};\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}