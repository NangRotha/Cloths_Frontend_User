{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,Link}from'react-router-dom';import{productsAPI}from'../services/api';import{useCart}from'../contexts/CartContext';import{getImageUrl}from'../utils/helpers';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductDetail=()=>{const{id}=useParams();const[product,setProduct]=useState(null);const[loading,setLoading]=useState(true);const[quantity,setQuantity]=useState(1);const{addToCart}=useCart();useEffect(()=>{const fetchProduct=async()=>{try{const response=await productsAPI.getProduct(id);setProduct(response.data);}catch(error){console.error('Error fetching product:',error);}finally{setLoading(false);}};fetchProduct();},[id]);const handleAddToCart=()=>{if(product){addToCart(product,quantity);}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"})});}if(!product){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-4 khmer-text\",children:\"\\u179A\\u1780\\u1798\\u17B7\\u1793\\u1783\\u17BE\\u1789\\u1795\\u179B\\u17B7\\u178F\\u1795\\u179B\"}),/*#__PURE__*/_jsx(Link,{to:\"/products\",className:\"btn-primary\",children:\"\\u178F\\u17D2\\u179A\\u17A1\\u1794\\u17CB\\u1791\\u17C5\\u1780\\u17B6\\u1793\\u17CB\\u1795\\u179B\\u17B7\\u178F\\u1795\\u179B\"})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50 py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow-lg rounded-lg overflow-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"md:flex\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"md:w-1/2\",children:product.image_url?/*#__PURE__*/_jsx(\"img\",{src:getImageUrl(product.image_url),alt:product.name,className:\"w-full h-full object-cover\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-full h-96 bg-gray-200 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 text-4xl\",children:\"\\u179A\\u17BC\\u1794\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:w-1/2 p-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-4 khmer-text\",children:product.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-3xl font-bold text-indigo-600 mb-4\",children:[\"$\",product.price]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6 khmer-text\",children:product.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500 khmer-text\",children:\"\\u179F\\u17D2\\u178F\\u17BB\\u1780:\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-sm font-medium text-gray-900\",children:[product.stock_quantity,\" \\u1794\\u17D2\\u179A\\u17A2\\u1794\\u17CB\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-500 khmer-text\",children:\"\\u1794\\u17D2\\u179A\\u1797\\u17C1\\u1791:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-sm font-medium text-gray-900\",children:product.category})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2 khmer-text\",children:\"\\u1785\\u17C6\\u1793\\u17BD\\u1793\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQuantity(Math.max(1,quantity-1)),className:\"bg-gray-200 text-gray-700 px-3 py-1 rounded-l hover:bg-gray-300\",children:\"-\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:quantity,onChange:e=>setQuantity(Math.max(1,parseInt(e.target.value)||1)),className:\"w-16 text-center border-t border-b border-gray-200 py-1\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setQuantity(Math.min(product.stock_quantity,quantity+1)),className:\"bg-gray-200 text-gray-700 px-3 py-1 rounded-r hover:bg-gray-300\",children:\"+\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAddToCart,className:\"btn-primary flex-1\",disabled:product.stock_quantity===0,children:product.stock_quantity===0?'អស់ស្តុក':'បញ្ចូលក្នុងរទេះ'}),/*#__PURE__*/_jsx(Link,{to:\"/products\",className:\"btn-secondary\",children:\"\\u178F\\u17D2\\u179A\\u17A1\\u1794\\u17CB\"})]})]})]})})})})});};export default ProductDetail;","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","productsAPI","useCart","getImageUrl","jsx","_jsx","jsxs","_jsxs","ProductDetail","id","product","setProduct","loading","setLoading","quantity","setQuantity","addToCart","fetchProduct","response","getProduct","data","error","console","handleAddToCart","className","children","to","image_url","src","alt","name","price","description","stock_quantity","category","onClick","Math","max","type","value","onChange","e","parseInt","target","min","disabled"],"sources":["/Users/rotha/Documents/Project /Cloth/frontend-user/src/components/ProductDetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport { productsAPI } from '../services/api';\nimport { useCart } from '../contexts/CartContext';\nimport { getImageUrl } from '../utils/helpers';\n\nconst ProductDetail = () => {\n  const { id } = useParams();\n  const [product, setProduct] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [quantity, setQuantity] = useState(1);\n  const { addToCart } = useCart();\n\n  useEffect(() => {\n    const fetchProduct = async () => {\n      try {\n        const response = await productsAPI.getProduct(id);\n        setProduct(response.data);\n      } catch (error) {\n        console.error('Error fetching product:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    fetchProduct();\n  }, [id]);\n\n  const handleAddToCart = () => {\n    if (product) {\n      addToCart(product, quantity);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600\"></div>\n      </div>\n    );\n  }\n\n  if (!product) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-4 khmer-text\">រកមិនឃើញផលិតផល</h1>\n          <Link to=\"/products\" className=\"btn-primary\">\n            ត្រឡប់ទៅកាន់ផលិតផល\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 py-8\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"max-w-4xl mx-auto\">\n          <div className=\"bg-white shadow-lg rounded-lg overflow-hidden\">\n            <div className=\"md:flex\">\n              <div className=\"md:w-1/2\">\n                {product.image_url ? (\n                  <img\n                    src={getImageUrl(product.image_url)}\n                    alt={product.name}\n                    className=\"w-full h-full object-cover\"\n                  />\n                ) : (\n                  <div className=\"w-full h-96 bg-gray-200 flex items-center justify-center\">\n                    <span className=\"text-gray-500 text-4xl\">រូប</span>\n                  </div>\n                )}\n              </div>\n              \n              <div className=\"md:w-1/2 p-8\">\n                <h1 className=\"text-3xl font-bold text-gray-900 mb-4 khmer-text\">\n                  {product.name}\n                </h1>\n                \n                <p className=\"text-3xl font-bold text-indigo-600 mb-4\">\n                  ${product.price}\n                </p>\n                \n                <p className=\"text-gray-600 mb-6 khmer-text\">\n                  {product.description}\n                </p>\n                \n                <div className=\"mb-6\">\n                  <span className=\"text-sm text-gray-500 khmer-text\">ស្តុក:</span>\n                  <span className=\"ml-2 text-sm font-medium text-gray-900\">\n                    {product.stock_quantity} ប្រអប់\n                  </span>\n                </div>\n                \n                <div className=\"mb-6\">\n                  <span className=\"text-sm text-gray-500 khmer-text\">ប្រភេទ:</span>\n                  <span className=\"ml-2 text-sm font-medium text-gray-900\">\n                    {product.category}\n                  </span>\n                </div>\n                \n                <div className=\"mb-6\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2 khmer-text\">\n                    ចំនួន\n                  </label>\n                  <div className=\"flex items-center\">\n                    <button\n                      onClick={() => setQuantity(Math.max(1, quantity - 1))}\n                      className=\"bg-gray-200 text-gray-700 px-3 py-1 rounded-l hover:bg-gray-300\"\n                    >\n                      -\n                    </button>\n                    <input\n                      type=\"number\"\n                      value={quantity}\n                      onChange={(e) => setQuantity(Math.max(1, parseInt(e.target.value) || 1))}\n                      className=\"w-16 text-center border-t border-b border-gray-200 py-1\"\n                    />\n                    <button\n                      onClick={() => setQuantity(Math.min(product.stock_quantity, quantity + 1))}\n                      className=\"bg-gray-200 text-gray-700 px-3 py-1 rounded-r hover:bg-gray-300\"\n                    >\n                      +\n                    </button>\n                  </div>\n                </div>\n                \n                <div className=\"flex space-x-4\">\n                  <button\n                    onClick={handleAddToCart}\n                    className=\"btn-primary flex-1\"\n                    disabled={product.stock_quantity === 0}\n                  >\n                    {product.stock_quantity === 0 ? 'អស់ស្តុក' : 'បញ្ចូលក្នុងរទេះ'}\n                  </button>\n                  <Link to=\"/products\" className=\"btn-secondary\">\n                    ត្រឡប់\n                  </Link>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ProductDetail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}