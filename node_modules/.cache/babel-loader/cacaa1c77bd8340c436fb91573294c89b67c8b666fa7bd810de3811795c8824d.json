{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate,useSearchParams}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const GoogleAuthCallback=()=>{const[searchParams]=useSearchParams();const navigate=useNavigate();const{loginWithGoogle}=useAuth();const[loading,setLoading]=useState(true);const[error,setError]=useState('');useEffect(()=>{const handleGoogleCallback=async()=>{const token=searchParams.get('token');if(!token){setError('ការផ្ទៀងផ្ទាត់ Google បរាជ័យ');setLoading(false);return;}try{// Store the token and fetch user info\nlocalStorage.setItem('token',token);const result=await loginWithGoogle(token);if(result.success){navigate('/');}else{setError(result.error||'ការផ្ទៀងផ្ទាត់ Google បរាជ័យ');}}catch(err){setError('មានបញ្ហាក្នុងការភ្ជាប់ជាមួយ Google');}finally{setLoading(false);}};handleGoogleCallback();},[searchParams,navigate,loginWithGoogle]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-50 to-purple-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-700 khmer-text\",children:\"\\u1780\\u17C6\\u1796\\u17BB\\u1784\\u1797\\u17D2\\u1787\\u17B6\\u1794\\u17CB\\u1787\\u17B6\\u1798\\u17BD\\u1799 Google...\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2 khmer-text\",children:\"\\u179F\\u17BC\\u1798\\u179A\\u1784\\u17CB\\u1785\\u17B6\\u17C6\\u1794\\u1793\\u17D2\\u178F\\u17B7\\u1785\"})]})});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-pink-100\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center bg-white p-8 rounded-lg shadow-lg max-w-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-red-500 text-5xl mb-4\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-gray-800 mb-2 khmer-text\",children:\"\\u1798\\u17B6\\u1793\\u1794\\u1789\\u17D2\\u17A0\\u17B6\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6 khmer-text\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/login'),className:\"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors khmer-text\",children:\"\\u178F\\u17D2\\u179A\\u17A1\\u1794\\u17CB\\u1791\\u17C5\\u1780\\u17B6\\u1793\\u17CB\\u1780\\u17D2\\u179A\\u17BB\\u1798\\u1796\\u17D0\\u178F\\u17CC\\u1798\\u17B6\\u1793\"})]})});}return null;};export default GoogleAuthCallback;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useSearchParams","useAuth","jsx","_jsx","jsxs","_jsxs","GoogleAuthCallback","searchParams","navigate","loginWithGoogle","loading","setLoading","error","setError","handleGoogleCallback","token","get","localStorage","setItem","result","success","err","className","children","onClick"],"sources":["/Users/rotha/Documents/Project /Cloth/frontend-user/src/components/GoogleAuthCallback.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate, useSearchParams } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst GoogleAuthCallback = () => {\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const { loginWithGoogle } = useAuth();\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n\n  useEffect(() => {\n    const handleGoogleCallback = async () => {\n      const token = searchParams.get('token');\n      \n      if (!token) {\n        setError('ការផ្ទៀងផ្ទាត់ Google បរាជ័យ');\n        setLoading(false);\n        return;\n      }\n\n      try {\n        // Store the token and fetch user info\n        localStorage.setItem('token', token);\n        const result = await loginWithGoogle(token);\n        \n        if (result.success) {\n          navigate('/');\n        } else {\n          setError(result.error || 'ការផ្ទៀងផ្ទាត់ Google បរាជ័យ');\n        }\n      } catch (err) {\n        setError('មានបញ្ហាក្នុងការភ្ជាប់ជាមួយ Google');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    handleGoogleCallback();\n  }, [searchParams, navigate, loginWithGoogle]);\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-50 to-purple-100\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4\"></div>\n          <h2 className=\"text-xl font-semibold text-gray-700 khmer-text\">កំពុងភ្ជាប់ជាមួយ Google...</h2>\n          <p className=\"text-gray-600 mt-2 khmer-text\">សូមរង់ចាំបន្តិច</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-pink-100\">\n        <div className=\"text-center bg-white p-8 rounded-lg shadow-lg max-w-md\">\n          <div className=\"text-red-500 text-5xl mb-4\">⚠️</div>\n          <h2 className=\"text-xl font-semibold text-gray-800 mb-2 khmer-text\">មានបញ្ហា</h2>\n          <p className=\"text-gray-600 mb-6 khmer-text\">{error}</p>\n          <button\n            onClick={() => navigate('/login')}\n            className=\"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors khmer-text\"\n          >\n            ត្រឡប់ទៅកាន់ក្រុមព័ត៌មាន\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n};\n\nexport default GoogleAuthCallback;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,CAAEC,eAAe,KAAQ,kBAAkB,CAC/D,OAASC,OAAO,KAAQ,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElD,KAAM,CAAAC,kBAAkB,CAAGA,CAAA,GAAM,CAC/B,KAAM,CAACC,YAAY,CAAC,CAAGP,eAAe,CAAC,CAAC,CACxC,KAAM,CAAAQ,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAEU,eAAgB,CAAC,CAAGR,OAAO,CAAC,CAAC,CACrC,KAAM,CAACS,OAAO,CAAEC,UAAU,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAEtCD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAiB,oBAAoB,CAAG,KAAAA,CAAA,GAAY,CACvC,KAAM,CAAAC,KAAK,CAAGR,YAAY,CAACS,GAAG,CAAC,OAAO,CAAC,CAEvC,GAAI,CAACD,KAAK,CAAE,CACVF,QAAQ,CAAC,8BAA8B,CAAC,CACxCF,UAAU,CAAC,KAAK,CAAC,CACjB,OACF,CAEA,GAAI,CACF;AACAM,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEH,KAAK,CAAC,CACpC,KAAM,CAAAI,MAAM,CAAG,KAAM,CAAAV,eAAe,CAACM,KAAK,CAAC,CAE3C,GAAII,MAAM,CAACC,OAAO,CAAE,CAClBZ,QAAQ,CAAC,GAAG,CAAC,CACf,CAAC,IAAM,CACLK,QAAQ,CAACM,MAAM,CAACP,KAAK,EAAI,8BAA8B,CAAC,CAC1D,CACF,CAAE,MAAOS,GAAG,CAAE,CACZR,QAAQ,CAAC,oCAAoC,CAAC,CAChD,CAAC,OAAS,CACRF,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAEDG,oBAAoB,CAAC,CAAC,CACxB,CAAC,CAAE,CAACP,YAAY,CAAEC,QAAQ,CAAEC,eAAe,CAAC,CAAC,CAE7C,GAAIC,OAAO,CAAE,CACX,mBACEP,IAAA,QAAKmB,SAAS,CAAC,8FAA8F,CAAAC,QAAA,cAC3GlB,KAAA,QAAKiB,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1BpB,IAAA,QAAKmB,SAAS,CAAC,+EAA+E,CAAM,CAAC,cACrGnB,IAAA,OAAImB,SAAS,CAAC,gDAAgD,CAAAC,QAAA,CAAC,4GAA0B,CAAI,CAAC,cAC9FpB,IAAA,MAAGmB,SAAS,CAAC,+BAA+B,CAAAC,QAAA,CAAC,4FAAe,CAAG,CAAC,EAC7D,CAAC,CACH,CAAC,CAEV,CAEA,GAAIX,KAAK,CAAE,CACT,mBACET,IAAA,QAAKmB,SAAS,CAAC,yFAAyF,CAAAC,QAAA,cACtGlB,KAAA,QAAKiB,SAAS,CAAC,wDAAwD,CAAAC,QAAA,eACrEpB,IAAA,QAAKmB,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,cAAE,CAAK,CAAC,cACpDpB,IAAA,OAAImB,SAAS,CAAC,qDAAqD,CAAAC,QAAA,CAAC,kDAAQ,CAAI,CAAC,cACjFpB,IAAA,MAAGmB,SAAS,CAAC,+BAA+B,CAAAC,QAAA,CAAEX,KAAK,CAAI,CAAC,cACxDT,IAAA,WACEqB,OAAO,CAAEA,CAAA,GAAMhB,QAAQ,CAAC,QAAQ,CAAE,CAClCc,SAAS,CAAC,gGAAgG,CAAAC,QAAA,CAC3G,kJAED,CAAQ,CAAC,EACN,CAAC,CACH,CAAC,CAEV,CAEA,MAAO,KAAI,CACb,CAAC,CAED,cAAe,CAAAjB,kBAAkB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}