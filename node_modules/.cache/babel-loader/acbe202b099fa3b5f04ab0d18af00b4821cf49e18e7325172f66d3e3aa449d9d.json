{"ast":null,"code":"import axios from 'axios';\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:8000',\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  withCredentials: false // Important for CORS\n});\n\n// Add token to requests if available\napi.interceptors.request.use(config => {\n  var _config$method;\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  console.log('Frontend-User API Request:', (_config$method = config.method) === null || _config$method === void 0 ? void 0 : _config$method.toUpperCase(), config.url);\n  return config;\n});\n\n// Add response interceptor for debugging\napi.interceptors.response.use(response => {\n  var _response$config$meth;\n  console.log('Frontend-User API Response:', (_response$config$meth = response.config.method) === null || _response$config$meth === void 0 ? void 0 : _response$config$meth.toUpperCase(), response.config.url, response.status);\n  return response;\n}, error => {\n  var _error$config, _error$config$method, _error$config2, _error$response, _error$response2;\n  console.error('Frontend-User API Error:', (_error$config = error.config) === null || _error$config === void 0 ? void 0 : (_error$config$method = _error$config.method) === null || _error$config$method === void 0 ? void 0 : _error$config$method.toUpperCase(), (_error$config2 = error.config) === null || _error$config2 === void 0 ? void 0 : _error$config2.url, (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status);\n\n  // Handle authentication errors\n  if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 401) {\n    localStorage.removeItem('token');\n    window.location.href = '/login';\n  }\n  return Promise.reject(error);\n});\nexport const authAPI = {\n  login: credentials => {\n    const params = new URLSearchParams();\n    params.append('username', credentials.username);\n    params.append('password', credentials.password);\n    return api.post('/api/auth/login', params, {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      }\n    });\n  },\n  register: userData => api.post('/api/auth/register', userData),\n  getProfile: () => api.get('/api/auth/me'),\n  googleLogin: () => api.get('/api/auth/google'),\n  loginWithGoogle: token => api.post('/api/auth/google/callback', {\n    token\n  })\n};\nexport const productsAPI = {\n  getProducts: () => {\n    console.log('Fetching products from backend...');\n    return api.get('/api/products/');\n  },\n  getProduct: id => api.get(`/api/products/${id}/`)\n};\nexport const ordersAPI = {\n  createOrder: orderData => api.post('/api/orders/', orderData),\n  getOrders: () => api.get('/api/orders/'),\n  getOrder: id => api.get(`/api/orders/${id}/`),\n  generateKHQR: orderId => api.post(`/api/orders/${orderId}/generate-khqr`),\n  verifyPayment: (orderId, data) => api.post(`/api/orders/${orderId}/verify-payment`, data)\n};\nexport default api;","map":{"version":3,"names":["axios","api","create","baseURL","process","env","REACT_APP_API_URL","headers","withCredentials","interceptors","request","use","config","_config$method","token","localStorage","getItem","Authorization","console","log","method","toUpperCase","url","response","_response$config$meth","status","error","_error$config","_error$config$method","_error$config2","_error$response","_error$response2","removeItem","window","location","href","Promise","reject","authAPI","login","credentials","params","URLSearchParams","append","username","password","post","register","userData","getProfile","get","googleLogin","loginWithGoogle","productsAPI","getProducts","getProduct","id","ordersAPI","createOrder","orderData","getOrders","getOrder","generateKHQR","orderId","verifyPayment","data"],"sources":["/Users/rotha/Documents/Project /Cloth/frontend-user/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: process.env.REACT_APP_API_URL || 'http://localhost:8000',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  withCredentials: false, // Important for CORS\n});\n\n// Add token to requests if available\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  console.log('Frontend-User API Request:', config.method?.toUpperCase(), config.url);\n  return config;\n});\n\n// Add response interceptor for debugging\napi.interceptors.response.use(\n  (response) => {\n    console.log('Frontend-User API Response:', response.config.method?.toUpperCase(), response.config.url, response.status);\n    return response;\n  },\n  (error) => {\n    console.error('Frontend-User API Error:', error.config?.method?.toUpperCase(), error.config?.url, error.response?.status);\n    \n    // Handle authentication errors\n    if (error.response?.status === 401) {\n      localStorage.removeItem('token');\n      window.location.href = '/login';\n    }\n    \n    return Promise.reject(error);\n  }\n);\n\nexport const authAPI = {\n  login: (credentials) => {\n    const params = new URLSearchParams();\n    params.append('username', credentials.username);\n    params.append('password', credentials.password);\n    return api.post('/api/auth/login', params, {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded',\n      },\n    });\n  },\n  register: (userData) => api.post('/api/auth/register', userData),\n  getProfile: () => api.get('/api/auth/me'),\n  googleLogin: () => api.get('/api/auth/google'),\n  loginWithGoogle: (token) => api.post('/api/auth/google/callback', { token }),\n};\n\nexport const productsAPI = {\n  getProducts: () => {\n    console.log('Fetching products from backend...');\n    return api.get('/api/products/');\n  },\n  getProduct: (id) => api.get(`/api/products/${id}/`),\n};\n\nexport const ordersAPI = {\n  createOrder: (orderData) => api.post('/api/orders/', orderData),\n  getOrders: () => api.get('/api/orders/'),\n  getOrder: (id) => api.get(`/api/orders/${id}/`),\n  generateKHQR: (orderId) => api.post(`/api/orders/${orderId}/generate-khqr`),\n  verifyPayment: (orderId, data) => api.post(`/api/orders/${orderId}/verify-payment`, data),\n};\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}